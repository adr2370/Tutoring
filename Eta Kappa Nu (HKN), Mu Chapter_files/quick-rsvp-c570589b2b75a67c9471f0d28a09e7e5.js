$(document).ready(function(){$("li.event").on("click","a[href$='new']",function(e){return enclosing_event=$(this).parent().parent().parent(),enclosing_event.find(".rsvp_message").slideToggle(function(){enclosing_event.find(".rsvp_message").remove()}),enclosing_event.find(".quick-rsvp").size()==0?(enclosing_event.append("<div class='quick-rsvp' style='display:none;'></div>"),$.get($(this).attr("href")+" #new_rsvp",function(e){$(e).find("#new_rsvp").length==0?enclosing_event.find(".quick-rsvp").html($(e).find("#messages")):(enclosing_event.find(".quick-rsvp").html($(e).find("#new_rsvp")),$("#rsvp_comment").css("width","100%"),enclosing_event.find(".field-submit").append("<input type='submit' id='cancel-quick-rsvp' value='Cancel' />"),enclosing_event.find(".field:first").remove(),enclosing_event.find(".field:first").remove()),enclosing_event.find(".quick-rsvp").slideToggle()})):enclosing_event.find(".quick-rsvp").slideToggle(),!1}),$("li.event").on("click","a[href$='edit']",function(e){return enclosing_event=$(this).parent().parent().parent(),enclosing_event.find(".rsvp_message").slideToggle(function(){enclosing_event.find(".rsvp_message").remove()}),enclosing_event.find(".quick-rsvp").size()==0?(enclosing_event.append("<div class='quick-rsvp' style='display:none;'></div>"),rsvp_id=$(this).data("rsvp_id"),edit_rsvp_str="#edit_rsvp_"+rsvp_id,$.get($(this).attr("href")+" "+edit_rsvp_str,function(e){$(e).find(edit_rsvp_str).length==0?enclosing_event.find(".quick-rsvp").html($(e).find("#messages")):(enclosing_event.find(".quick-rsvp").html($(e).find(edit_rsvp_str)),$("#rsvp_comment").css("width","100%"),enclosing_event.find(".field-submit").append("<input type='submit' id='cancel-quick-rsvp' value='Cancel' />"),enclosing_event.find(".field:first").remove(),enclosing_event.find(".field:first").remove()),enclosing_event.find(".quick-rsvp").slideToggle()})):enclosing_event.find(".quick-rsvp").slideToggle(),!1}),$("li.event").on("click","#cancel-quick-rsvp",function(e){return $(this).parent().parent().parent().slideToggle(),!1}),$("li.event").on("submit","form",function(e){return enclosing_event=$(this).parent().parent(),$.post($(this).attr("action"),$(this).serialize(),function(e){enclosing_event.append("<div class='rsvp_message'></div>"),enclosing_event.find(".rsvp_message").html($(e).find("#messages")),enclosing_event.find(".quick-rsvp").remove(),enclosing_event.find(".rsvp_link").html('[<a data-rsvp_id="'+$(e).find("#edit_rsvp").data("rsvp_id")+'" href="'+$(e).find("#edit_rsvp").attr("href")+"\">RSVP'ed</a>]")}),!1})});